#textdomain wesnoth-The_Sojournings_of_Grog

#
# This scenario is long, simple, and doesn't work right.
#
# This is what is meant to happen. You go underground and it gets steadily creapier
# until you reach a great cave. In the cave you are suddenly surrounded by nasty and
# annoying magical beings. You kill them and eventually break out onto the surface
# and rescue a load of prisoners.
#
# The only important thing is the variables. From now on you will have a spokesman
# and a sidekick. These are to be used in conversations with the humans until you discover
# Ormron (and afterwards depending on circumstances). The number of humans alive is kept
# in 'human_prisoners_alive'. We also initialise variable 'isalive_Ormron' here to make things easier.
# This variable doubles as a marker for A7. 'human_prisoners_helpful' = yes if they havent commited
# mass suicide (see tsog-deaths.cfg)
#
# NOTE: The spokesman is marked by his ID rather than his ROLE.
#       This is because Me and Roles don't agree very well. :-)
# NOTE: This is slightly buggy because we recall sidekick and spokesman but
#       I'm not sure what happens when we choose a new one.
# TODO: sort out the sea serpent
# TODO: make second wave of lavas
# TODO: sort out the shroud in the beginning
# TODO: sort out geography
# TODO: sort out lava beasts
# TODO: make you have to kill all the lava beasts before you go on

# TODO: add some wandering flying fire monsters like in UtBS.

# TODO: add AI syntax because AI units are afraid of mine! Good chance to test the 1.8 syntax.
#

# wmllint: recognize Grog
# wmllint: recognize sidekick
# wmllint: recognize trigger_room_3_comment_1
# wmllint: recognize trigger_room_3_comment_2
# wmllint: recognize trigger_exit_comment_1
# wmllint: recognize trigger_exit_comment_2
# wmllint: recognize spokesman

[scenario]
    id=A5
    name=_"The Deep Levels"
    map_data="{~add-ons/The_Sojournings_of_Grog/maps/A5-Deep_Levels.map}"

    #not yet
    victory_when_enemies_defeated=no
    next_scenario=A6
    {TURNS 60 55 50}

    {DEEP_UNDERGROUND}

#ifhave ~add-ons/UMC_Music/_main.cfg
    # wmlscope: start ignoring
    {INTRO_AND_SCENARIO_MUSIC "northerners.ogg" "into_the_shadows.ogg"}
    {EXTRA_SCENARIO_MUSIC "legends_of_the_north.ogg"}
    {EXTRA_SCENARIO_MUSIC "knalgan_theme.ogg"}
    {EXTRA_SCENARIO_MUSIC "battlecry.ogg"}
    {EXTRA_SCENARIO_MUSIC "the_deep_path.ogg"}
    {EXTRA_SCENARIO_MUSIC "battle.ogg"}
    # wmlscope: stop ignoring
#else
    {INTRO_AND_SCENARIO_MUSIC "northerners.ogg" "into_the_shadows.ogg"}
    {EXTRA_SCENARIO_MUSIC "legends_of_the_north.ogg"}
    {EXTRA_SCENARIO_MUSIC "knalgan_theme.ogg"}
    {EXTRA_SCENARIO_MUSIC "the_deep_path.ogg"}
    {EXTRA_SCENARIO_MUSIC "battle.ogg"}
#endif

    [story]
        [part]
            story=_"They found themselves in a dark, narrow tunnel; behind them the hordes of the Undead followed. Stretching for miles ahead were numerous tunnels and fast flowing rivers."
        [/part]
    [/story]

    #
    # Us
    #
    [side]
        side=1
        controller=human
        team_name=goodies
        user_team_name=_"Goodies"

        {GROG}
        type="Grog Great"

        recruit=Troll Whelp

        {GOLD 200 175 150} # do not change this gold. The player is supposed to start with 0 carryover from A4.
        {INCOME 10 8 6}

        shroud=yes

        share_maps=yes
        share_view=yes

        {TROLL_FLAG}
    [/side]

    #
    # Nagas
    #
    [side]
        type=Naga Myrmidon
        id=nagaboss
        name=_"Naga Boss"

        canrecruit=yes
        #enable turn 4
        #recruit=Naga Fighter,Naga Guardian,Naga Warden,Naga Warrior
        side=2

        team_name=nagas
        user_team_name=_"Cave Nagas"

        {INCOME 0 3 6}
        {GOLD 120 150 180}

        {ai/aliases/stable_singleplayer.cfg}
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT passive_leader yes}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0}
            #passive_leader=yes
        [/ai]
    [/side]

    #
    # Bats
    #
    [side]
        type=Dread Bat
        id=batboss
        name=_"Bat Boss"

        canrecruit=yes
        #enable on turn 6
        #recruit=Vampire Bat,Blood Bat
        side=3

        team_name=bats
        user_team_name=_"Cave Bats"

        {INCOME 0 4 8}
        {GOLD 160 200 240} #lots and lots of bats!

        {ai/aliases/stable_singleplayer.cfg}
        [ai]
            #passive_leader=yes
            {AI_SIMPLE_ALWAYS_ASPECT passive_leader yes}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 1.0}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0}
            #avoid area with lava
            #[avoid]
            #	x=1-24
            #	y=19-34
            #[/avoid]
            {AI_SIMPLE_ALWAYS_ASPECT_VALUE avoid (
                x=1-24
                y=19-34
            )}
        [/ai]
    [/side]

    #
    # Lava Beasts and Rock Golems
    #
    [side]
        no_leader=yes
        side=4
        team_name=lavamonsters
        user_team_name= _ "Lava Monsters"
        [ai]
            aggression=100.0 # ???
            caution=-2
            recruitment_ignore_bad_movement="yes"
            recruitment_ignore_bad_combat="yes"
            simple_targeting="yes"
            village_value=0
            villages_per_scout=0
            attack_depth=6
            [target]
                side=1
                value=60
            [/target]
        [/ai]
    [/side]

    #
    # Spiders
    #
    [side]
        no_leader=yes
        side=5
        team_name=spiders
        user_team_name=_"Cave Nasties"
    [/side]

    #
    # Orcs
    #
    [side]
        no_leader=yes
        side=6
        team_name=orcs
        user_team_name=_"Orcs"

        {FLAG_VARIANT northerner}
    [/side]

    #
    # Humans
    #
    [side]
        no_leader=yes
        side=7
        #humans are neutral towards all sides. Elvish_Hunter
        team_name=goodies,nagas,bats,lavamonsters,spiders,orcs
        user_team_name=_"Goodies"

        {FLAG_VARIANT loyalist}

        shroud=yes
        #added shroud to make these two lines working. Elvish_Hunter
        share_maps=yes
        share_view=yes
    [/side]

    ################
    # Set-up
    ################

    #
    # Prestart: setup humans and objectives
    #
    [event]
        name=prestart

        #init for A7
        {VARIABLE isalive_Ormron not_found}

        #has wall 1 been checked ie should you have the extra blathers
        {VARIABLE wall_opened_1 no}
        #has wall 2 been checked
        {VARIABLE wall_opened_2 no}
        #wall 1 opened?
        {VARIABLE wall_checked_1 no}
        #wall 1 opened?
        {VARIABLE wall_checked_2 no}

        #which wall was opened first
        {VARIABLE first_wall "no_wall_opened"}

        [objectives]
            side=1
            [objective]
                description= _ "Get out of the tunnels alive"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of Grog"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Zurg"
                condition=lose
            [/objective]
            [objective]
                description= _ "Death of Elyssa"
                condition=lose
            [/objective]
            [objective]
                description= _ "Time runs out"
                condition=lose
            [/objective]
            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]
        [/objectives]
    [/event]

    ################
    # INTRO
    ################

    #
    # Start: create some enemies and talk
    #
    [event]
        name=start

        #the nagas that accost you when you first start
#ifdef HARD
        {GENERIC_UNIT 2 "Naga Myrmidon" 39 66}
#else
        {GENERIC_UNIT 2 "Naga Warrior" 39 66}
#endif
#ifdef EASY
        {GENERIC_UNIT 2 "Naga Hunter" 25 71}
#else
        {GENERIC_UNIT 2 "Naga Assassin" 25 71}
#endif
#ifdef EASY
        {GENERIC_UNIT 2 "Naga Guardian" 26 72}
#endif
#ifdef NORMAL
        {GENERIC_UNIT 2 "Naga Warden" 26 72}
#endif
#ifdef HARD
        {GENERIC_UNIT 2 "Naga Sentinel" 26 72}
#endif

#ifndef EASY
        {GENERIC_UNIT 2 "Naga Jackla" 27 71}
#endif

        #place some Giant Rats. They don't move and are on Nagas' side, so they don't get attacked. Elvish_Hunter
        {GENERIC_UNIT 2 "Giant Rat" 24 63} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 26 62} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 27 64} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 33 62} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 31 63} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 33 64} {GUARDIAN}
#ifdef HARD
        {GENERIC_UNIT 2 "Giant Rat" 29 64} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 29 61} {GUARDIAN}
        {GENERIC_UNIT 2 "Giant Rat" 36 62} {GUARDIAN}
#endif

        [recall]
            id=Elyssa
            x,y=38,74
        [/recall]

        [recall]
            id=Zurg
            x,y=39,75
        [/recall]

        [recall]
            id=mudcrawler
            x,y=38,73
        [/recall]

        [recall]
            id=Krunk
            x,y=37,74
        [/recall]

        {MAKE_HERO Zurg}

        # if you have the white troll he will close the tunnel, otherwise fall back on zurg. E_H.
        [if]
            [have_unit]
                id=Krunk
            [/have_unit]
            [then]
                [message]
                    speaker=Krunk
                    message= _"Krunk stop Bones."
                [/message]
            [/then]
            [else]
                [message]
                    speaker=Zurg
                    message= _"Zurg stop Bones."
                [/message]
            [/else]
        [/if]

        [scroll_to]
            x,y=40,75
        [/scroll_to]

        [delay]
            time=500
        [/delay]

        #let's try my Lua tag. E_H
        [flash_screen]
            color=white
        [/flash_screen]
        {QUAKE "fire.wav"}
        [flash_screen]
            color=black
        [/flash_screen]
        {QUAKE dragonstick.ogg}
        [flash_screen]
            color=red
        [/flash_screen]
        [sound]
            name=rumble.ogg
        [/sound]
        [flash_screen]
            color=magenta # for variety
        [/flash_screen]

        [sound]
            name=rumble.ogg
        [/sound]

        [terrain]
            x=41
            y=76
            terrain=Xu
        [/terrain]

        [terrain]
            x=40,41
            y=75,76
            terrain=Xu
        [/terrain]

        [redraw]
        [/redraw]

        [message]
            speaker=narrator
            message= _"The tunnel caved in behind them."
            image=wesnoth-icon.png
        [/message]

        #Elyssa is jealous
        #could we have a rivalry between them? (Eros)
        [message]
            speaker=Elyssa
            message= _"Wow! I didn't know Trolls had such magic."
        [/message]

        [if]
            [have_unit]
                id=Krunk
            [/have_unit]
            [then]
                [message]
                    speaker=Krunk
                    message= _"Rock and earth, Troll magic."
                [/message]
            [/then]
            [else]
                [message]
                    speaker=Zurg
                    message= _"Rock and earth, Troll magic."
                [/message]
            [/else]
        [/if]

        [message]
            speaker=Grog
            message= _"We go."
        [/message]
    [/event]

    #######################
    # SECTION 1
    # NAGAS AND BATS
    #######################

    #
    # Moveto: Warning when Grog moves to the first keep
    #
    [event]
        name=moveto

        [filter]
            id=Grog
            [filter_location]
                x,y=30,65
            [/filter_location]
        [/filter]

        [message]
            speaker=Elyssa
            # wmllint: local spelling Gro
            message= _"I wouldn't recruit many Trolls here Gro..."
        [/message]

        [message]
            speaker=Grog
            message= _"Yes. Grog know."
        [/message]

        #
        # Moveto: Ask where we are going
        # (put it inside so that it is not fired at the same time)
        #
        [event]
            name=moveto

            [filter]
                side=1
                [filter_location]
                    x,y=30,65
                    radius=5
                [/filter_location]
            [/filter]

            {MESSAGE_FIRST_UNIT
            ( _ "$unit.name lost. Where Trolls go now?")
            ( "" )
            ( "" )
            ( _ "Where do we go now then?")}

            [if]
                [variable]
                    name=unit.id
                    not_equals=Grog
                [/variable]

                [then]
                    [message]
                        speaker=Grog
                        message= _ "Grog not know. No Troll down here for many years."
                    [/message]
                [/then]

                [else]
                    [message]
                        speaker=Zurg
                        message= _ "I do not know. None have been down here in living memory."
                    [/message]
                [/else]
            [/if]

            [message]
                speaker=Elyssa
                message= _ "Let us just choose a path and be done with it. It can't be worse than sitting here!"
            [/message]
        [/event]
    [/event]

    #
    # Turn 4: Activate nagas
    #
    [event]
        name=turn 4

        [allow_recruit]
            side=2
#ifdef EASY
            type=Naga Fighter,Naga Hunter,Naga Guardian,Naga Warden,Naga Warrior
#endif
#ifdef NORMAL
            type=Naga Fighter,Naga Hunter,Naga Guardian,Naga Warden,Naga Warrior,Naga Jackla
#endif
#ifdef HARD
            type=Naga Fighter,Naga Hunter,Naga Guardian,Naga Warden,Naga Warrior,Naga Jackla,Naga Assassin
#endif
        [/allow_recruit]
    [/event]

    #
    # Turn 6: Activate bats, and create subject minions
    #
    [event]
        name=turn 6

        [allow_recruit]
            side=3
            type=Vampire Bat,Blood Bat
        [/allow_recruit]

        #Water Serpent? Side 3 is intentional so it doesnt attack the bats
        {GENERIC_UNIT 3 "Water Serpent" 14 47} {GUARDIAN}
        {GENERIC_UNIT 3 "Water Serpent" 16 47} {GUARDIAN}

        #Extra nasty bats
        {GENERIC_UNIT 3 "Dread Bat" 12 47}
        {GENERIC_UNIT 3 "Dread Bat" 22 46}
    [/event]

    # Sighted Rats: talk
    [event]
        name=sighted,moveto

        [filter]
            type=Giant Rat
            [filter_vision]
                viewing_side=1
            [/filter_vision]
        [/filter]

        [message]
            speaker=Grog
            message= _"Grog see rats."
        [/message]

        [message]
            speaker=Elyssa
            message= _"Perfect. Let's fry some for dinner!"
        [/message]

        [message]
            speaker=Grog
            message= _"You like fry Mage?"
        [/message]

        [message]
            speaker=Elyssa
            #COMMENT this is actually quite funny!...(Eros)
            #And no I didnt write it (Eros)
            message= _"Oh yes, fried eggs, fried tomatoes, fried Dwarf, fried skeleton and fried rat..."
        [/message]

        #[message]
        #	speaker=Zurg
        #	message= _"How about dead rat first?"
        #[/message]
    [/event]

    #
    # Sighted Naga: talk
    # we have two events because sighted events dont seem to work properly on 1.7
    [event]
        name=sighted,moveto

        [filter]
            race=naga
            [filter_vision]
                viewing_side=1
            [/filter_vision]
        [/filter]

        #Original by Daravel was: Grog hate horrible fish. Changed because Nagas are snakes, not fishes. E_H.
        #CHANGE Grog is not a biologist so fish will do nicely (Eros)
        #Actually I have just thought of a way of doing it.
        #CHANGE - clarification
        [message]
            speaker=Grog
            message= _"Argh. Them Nagas. Grog hate horrible, slimy, snaky things."
        [/message]

        [message]
            #speaker is unit, since we got rid of temp_unit variable. Elvish_Hunter
            speaker=unit
            message= _"Killsss anss sslaysss. Thenss whatss we donsss sslaysss the monsstersss wills. Hssss." # wmllint: no spellcheck
        [/message]

        [message]
            speaker=Elyssa
            message= _"Sounds ominous."
        [/message]

        [message]
            speaker=Grog
            message= _"<u>Ohmenuss.</u> Word too big. Grog like smash, crush and squash. Dwarves hate dem words."
        [/message]
    [/event]

    #
    # Flavour Event
    # (We cant have met the bats yet anyway)
    #
    [event]
        name=turn 7

        {ELF_ROLE_MALE damp}

        [if]
            [have_unit]
                role=damp
            [/have_unit]

            [then]
                [message]
                    role=damp
                    # wmllint: local spelling Brrr.
                    message= _"Brrr. It's cold and down here; and dark, very dark. How can I be expected to fight in this stygian pit?"
                [/message]

                [message]
                    role=damp
                    message= _"I bet there are bats down here as well; and they won't just be ordinary bats. No, they are going to be <b>big, hairy, ugly and around every corner!</b> Gives me the shivers just thinking of it."
                [/message]
            [/then]

            [else]
                {TROLL_ROLE_SMALL damp2}

                [store_unit]
                    variable=temp_unit
                    kill=no
                    [filter]
                        role=damp2
                    [/filter]
                [/store_unit]

                [message]
                    role=damp2
                    message= _"Cold and damp. $temp_unit.name no like cold and damp."
                [/message]

                [message]
                    role=damp2
                    message= _"$temp_unit.name think there bats. $temp_unit.name no like bats - so hairy and ugly. Arghh!"
                [/message]

                {CLEAR_VARIABLE "temp_unit"}
            [/else]
        [/if]

        [message]
            speaker=Elyssa
            message= _"I wager that the bats aren't what we need to worry about down here. Besides, I'll fry them all to go with those rats!"
        [/message]
    [/event]

    #
    # Sighted Bats: talk
    #
    [event]
        name=sighted,moveto

        [filter]
            race=bats
            [filter_vision]
                viewing_side=1
            [/filter_vision]
        [/filter]

        #Lets assume they are not dead yet shall we. (Eros)
        [message]
            role=damp
            message= _"I was right, look at the size of that thing!"
        [/message]

        #OR

        [store_unit]
            variable=temp_unit
            kill=no
            [filter]
                role=damp2
            [/filter]
        [/store_unit]

        #Daravel said: remove. I reworked the sentence. E_H.
        [message]
            role=damp2
            message= _"$temp_unit.name right. Bats. Arghh!"
        [/message]

        {CLEAR_VARIABLE "temp_unit"}
    [/event]

    #
    # Sighted Serpent: talk
    #
    [event]
        name=sighted,moveto

        [filter]
            type=Water Serpent
            [filter_vision]
                viewing_side=1
            [/filter_vision]
        [/filter]

        #COMMENT - so original aint I!
        [message]
            speaker=Elyssa
            message= _"I thought you said that there were monsters down here, Zurg. All I can see are bats."
        [/message]

        [message]
            speaker=Zurg
            message= _"That not a bat!"
        [/message]
    [/event]

    ##################
    # SECTION 2
    # SPIDERS
    ##################

    #
    # Moveto: activate spider 1 when you enter the tunnel after the bats
    #
    [event]
        name=moveto
        [filter]
            side=1
            [filter_location]
                x=8
                y=37
                #radius increased to 8 to make up for quick units. Otherwise the spider was summoned
                #too early and the sighted event not fired. Elvish_Hunter
                radius=8
            [/filter_location]
        [/filter]

        {GENERIC_UNIT 5 "Giant Spider" 8 37} {GUARDIAN}
    [/event]

    #
    # Moveto: activate spider 2 when you enter the tunnel after the bats
    #
    [event]
        name=moveto
        [filter]
            side=1
            [filter_location]
                x=15
                y=37
                #idem as above. Elvish_Hunter
                radius=8
            [/filter_location]
        [/filter]

        {GENERIC_UNIT 5 "Giant Spider" 15 37} {GUARDIAN}
    [/event]

    #
    # Sighted Spider: talk.
    #
    [event]
        name=sighted

        [filter]
            side=5
        [/filter]

        [filter_second]
            side=1
        [/filter_second]

        [fire_event]
            name=sighted_spiders
            [secondary_unit]
                x,y=$second_unit.x,$second_unit.y
            [/secondary_unit]
        [/fire_event]
    [/event]

    [event]
        name=moveto

        [filter]
            side=5
        [/filter]

        [filter_vision]
            viewing_side=1
        [/filter_vision]

        #So, this event is a moveto, but we need a second unit.
        #To create one we use the NEAREST_UNIT macro to find the nearest unit to the spider
        #then we pass it as second unit to the fire_event tag.
        #Finally, after having fired the event, we clear the variable to make
        #this workaround transparent and clean. E_H.

        #{NEAREST_UNIT $unit.x $unit.y 999 side=1 side_1_speaker}

        #this is a custom Lua tag. It replaces the macro above. E_H.
        [nearest_unit]
            starting_x=$unit.x
            starting_y=$unit.y
            variable=side_1_speaker
            [filter]
                side=1
            [/filter]
        [/nearest_unit]

        [fire_event]
            name=sighted_spiders
            [secondary_unit]
                x,y=$side_1_speaker.x,$side_1_speaker.y
            [/secondary_unit]
        [/fire_event]

        {CLEAR_VARIABLE side_1_speaker}
    [/event]

    [event]
        name=sighted_spiders
        #first_time_only=no

        # to avoid having Elyssa talking about insects and then correcting herself. E_H.
        [if]
            [variable]
                name=second_unit.id
                equals=mudcrawler
            [/variable]
            [or]
                [variable]
                    name=second_unit.id
                    equals=Elyssa
                [/variable]
            [/or]
            [then]
                [message]
                    speaker=Grog
                    message= _ "Insects everywhere."
                [/message]
            [/then]
            [else]
                {MESSAGE_SECOND_UNIT
                ( _ "Insects everywhere.")
                ( "" )
                ( "" )
                ( _ "Argghh more insects.")}
            [/else]
        [/if]

        #[clearly not serious mundanity leavener] (Mars)
        #and not palagerised from utbs either (Eros)
        #Yes, I've something to say. This event was added to make pair with the one from UtBS.
        #Daravel said: remove. My opinion is: keep it, maybe modifying it. E_H.
        #COMMENT Well let me add to this running commentry by saying that this is a long dark scenario so as any Psychologist will tell you we need some light humour to make it fun so keep it. (Eros)

        [message]
            speaker=Elyssa
            # wmllint: local spelling chelicerate
            message= _ "How many times do I need to tell people this? <b>Spiders are not insects.</b> They are air-breathing chelicerate arthropods."
        [/message]

        #[/clearly not serious mundanity leavener]
    [/event]

    #################
    # SECTION 3
    # LAVA NASTIES
    #################

    #
    # Moveto Healing Glyph: explain their usages.
    #
    [event]
        name=moveto
        [filter]
            side=1
            [filter_location]
                x=9,14,20,5,9,13
                y=25,24,21,22,28,29
            [/filter_location]
        [/filter]

        [message]
            speaker=Elyssa
            #these annals were they the ones like "Technology: now featuring new articles on the latest rune designs" (Eros)
            #COMMENT The dwarVish-dwarFish ting is comploicated but lets keep the F for variation
            message= _ "I have heard of these things from Dwarvish annals; they are said to fully restore any person who stands under them - However, they work only once."
        [/message]
    [/event]

    #
    # Create 6 healing glyphs (too many? Eros)
    #
    {OBJ_HEALING_GLYPH 9  25}
    {OBJ_HEALING_GLYPH 14 24}
    {OBJ_HEALING_GLYPH 20 21}
    {OBJ_HEALING_GLYPH 5  22}
    {OBJ_HEALING_GLYPH 9  28}
    {OBJ_HEALING_GLYPH 13 29}

    #
    # Moveto: Warning when Grog moves to the second keep
    #
    #[event]
    #	name=moveto
    #
    #	[filter]
    #		id=Grog
    #		[filter_location]
    #			x=8,15
    #			y=37,37
    #		[/filter_location]
    #	[/filter]
    #
    #	[message]
    #		speaker=Zurg
    #		message= _"Our supplies are getting low"
    #	[/message]
    #
    #	[message]
    #		speaker=Grog
    #		message= _ "Grog noticed that a while ago."
    #	[/message]
    #[/event]

    #
    # Moveto: Discussion of what happens next
    #
    [event]
        name=moveto

        [filter]
            id=Grog
            [filter_location]
                x=8,15
                y=37,37
                radius=4
            [/filter_location]
        [/filter]

        [message]
            speaker=Elyssa
            message= _"I am getting an uneasy feeling about this place; I sense evil magic."
        [/message]

        [message]
            speaker=Zurg
            message= _ "Yes Human, danger is here."
        [/message]
    [/event]

    #
    # Moveto: Start the timer for the Lava Beasts. Warn the player as well.
    #
    [event]
        name=moveto
        [filter]
            side=1
            [filter_location]
                x=11
                y=27
                radius=6
            [/filter_location]
        [/filter]

        [message]
            speaker=Zurg
            message= _"Trolls keep together. Trolls say things live in fire."
        [/message]

        [message]
            speaker=Elyssa
            message= _"Can creatures really inhabit this lava?"
        [/message]

        [message]
            speaker=Zurg
            message= _"Maybe."
        [/message]

        #count down until the Lava beasts appear
        [set_variable]
            name=turns_to_trigger
            value=2
        [/set_variable]

        [remove_shroud]
            x,y=11,27
            radius=10
            side=1
        [/remove_shroud]
    [/event]

    #
    # Activate Lava Beasts: If the time is ripe lets get going.
    #
    [event]
        name=new turn
        first_time_only=no
        [set_variable]
            name=turns_to_trigger
            add=-1
        [/set_variable]

        [if]
            [variable]
                name=turns_to_trigger
                numerical_equals=0
            [/variable]
            [then]
                [clear_variable]
                    name=turns_to_trigger
                [/clear_variable]

                #these were all Rock Golems, but then the scenario was too hard.
                #So, I left only the three original Rock Golems and added Animated Rock unit from Era of Myths
                #(but is known as Earth Elemental). Basically, this is a L1 Rock Golem. E_H.
                {GENERIC_UNIT 4 "Animated Rock" 4  21} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 7  21} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 13 19} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 2  27} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 24 30} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 20 30} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 18 21} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 24 22} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 24 25} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 21 26} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Animated Rock" 5  26} {EASY_AND_HARD_MOD}

                # added also some more Fire Wisps. Level 0, for variety
                # and also to compensate moving from Lava Monsters to weaker Fire Guardians. E_H.
                {GENERIC_UNIT 4 "Fire Wisp" 9 22} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Fire Wisp" 6 24} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Fire Wisp" 11 32} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Fire Wisp" 14 32} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Fire Wisp" 22 28} {EASY_AND_HARD_MOD}

                #block of monsters added as per Eros' request. If they make the level too hard I'll remove some. Elvish_Hunter
                # that were Lava Beasts and Lava Monsters, replaced with Brazier Creations and Fire Guardians. E_H.
                {GENERIC_UNIT 4 "Brazier Creation" 7 20} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Brazier Creation" 5 29} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Brazier Creation" 19 32} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Brazier Creation" 3 22} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Brazier Creation" 22 31} {EASY_AND_HARD_MOD}

                {GENERIC_UNIT 4 "Fire Guardian" 21 24} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Fire Guardian" 9 26} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Fire Guardian" 12 18} {EASY_AND_HARD_MOD}

                {GENERIC_UNIT 4 "Rock Golem" 19 22} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Rock Golem" 19 29} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Rock Golem" 11 22} {EASY_AND_HARD_MOD}
                {GENERIC_UNIT 4 "Rock Golem" 26 22} {EASY_AND_HARD_MOD}

                # sorry Eros, I uncommented this message to make evident that some unit appeared.
                # otherwise it'll qualify as tomato surprise. E_H.
                [message]
                    speaker=Elyssa
                    message= _"Ah! Evil magic things. I think I understand your point now."
                [/message]

                {ELF_ROLE_MALE stand}
                [message]
                    role=stand #no need to check as looks fine without
                    message= _"Stand your ground."
                [/message]
            [/then]
        [/if]
    [/event]

    #
    # Monsters All Die: lets get going.
    #
    [event]
        name=die

        [filter]
            type=Rock Golem,Animated Rock,Fire Wisp,Brazier Creation,Fire Guardian
        [/filter]

        [filter_condition]
            [not]
                [have_unit]
                    type=Rock Golem,Animated Rock,Fire Wisp,Brazier Creation,Fire Guardian
                [/have_unit]
            [/not]
        [/filter_condition]

        [message]
            speaker=Grog
            message= _ "Trolls move quick. Fire worry us."
        [/message]

        [message]
            speaker=Elyssa
            message= _ "Those were curious beings; I would've liked to know more about them!"
        [/message]

        {TROLL_ROLE_SMALL surprise}

        #[message]
        #	role=surprise
        #	#message= _ "Typical Woman!"
        #	#Trolls don't see women, only trollettes (Mars)
        #	#message= _ "Typical Elyssa!"
        #	#tough! (Eros)
        #	message= _ "Typical!"
        #[/message]

        [message]
            role=surprise
            message= _ "?!?"
        [/message]
    [/event]

    ####################################################################
    # SECTION 4
    # WALL SECTIONS AND ORCS PLUS PRISONERS
    # All code is duplicated on the assumption that the player
    # in a fit of madness might split their forces.
    ####################################################################

    #
    # Macro for sighting the wall: talk
    #
#define WALL_SIGHTED X Y
    [event]
        name=moveto

        [filter]
            side=1
            [filter_location]
                x={X}
                y={Y}
                radius=3
            [/filter_location]
        [/filter]

        {MESSAGE_FIRST_UNIT
        ( _ "$unit.name hears sound in wall.")
        ( "" )
        ( "" )
        ( _ "I can hear strange sounds coming directly from that wall.")}

        [if]
            [variable]
                name=unit.id
                equals=Elyssa
            [/variable]
            [or]
                [variable]
                    name=unit.id
                    equals=mudcrawler
                [/variable]
            [/or]

            [then]
                [message]
                    speaker=Zurg
                    message= _ "Zurg say that you had better take a look at it."
                [/message]
            [/then]

            [else]
                [message]
                    speaker=Elyssa
                    message= _ "You had best check it out."
                [/message]
            [/else]
        [/if]
    [/event]
#enddef

    #
    # Sighted Wall: two sighted events. Lets squash stuff.
    #
    {WALL_SIGHTED 14 13}
    {WALL_SIGHTED 30 17}

    #
    # Macro for destroying the wall:
    #
#define WALL_DOWN WALL_NUMBER X_TRIGGER Y_TRIGGER X_WALL Y_WALL
    [event]
        name=moveto
        first_time_only=no

        [filter]
            side=1
            [filter_location]
                x={X_TRIGGER}
                y={Y_TRIGGER}
            [/filter_location]
        [/filter]

        [if]
            [variable]
                name="wall_opened_"+{WALL_NUMBER}
                equals=no
            [/variable]

            [then]
                [if]
                    [variable]
                        name="wall_checked_"+{WALL_NUMBER}
                        equals=no
                    [/variable]

                    [then]
                        {MESSAGE_FIRST_UNIT
                        ( _ "Weak as wood to $unit.name .")
                        ( "" )
                        ( "" )
                        ( _ "Certainly is a bit soft!!!")}

                        {VARIABLE ("wall_checked_"+{WALL_NUMBER}) yes}
                    [/then]
                [/if]

                [message]
                    speaker=unit
                    message= _ "Should I break it down?"
                    [option]
                        message= _ "Yes, certainly!"
                        [command]
                            {VARIABLE ("wall_opened_"+{WALL_NUMBER}) yes}

                            [message]
                                speaker=narrator
                                message= _ "The wall collapses to reveal a tunnel."
                                image=wesnoth-icon.png
                                #since there is no more the *CRASH* message I added this sound.
                                #Unfortunately, there isn't a wall collapsing sound in mainline. E_H.
                                sound=wose-die.ogg
                            [/message]

                            [terrain]
                                x={X_WALL}
                                y={Y_WALL}
                                terrain=Uu^Dr
                            [/terrain]

                            [redraw]
                            [/redraw]

                            [remove_shroud]
                                x={X_WALL}
                                y={Y_WALL}
                                side=1
                                radius=5
                            [/remove_shroud]

                            #only fire the wall_opened event once
                            [if]
                                [variable]
                                    name=first_wall
                                    equals="no_wall_opened"
                                [/variable]

                                [then]
                                    # which wall was opened first
                                    {VARIABLE first_wall {WALL_NUMBER}}

                                    #orc guards in room 1
#ifdef HARD
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Warlord" 23 11 orc_slaver_1} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Slurbow" 29 8} {GUARDIAN}
#else
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Warrior" 23 11 orc_slaver_1} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Crossbowman" 29 8} {GUARDIAN}
#endif

                                    #orc guards in room 2
#ifdef HARD
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Warlord" 32 11 orc_slaver_2} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Slurbow" 25 9} {GUARDIAN}
#else
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Warrior" 32 11 orc_slaver_2} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Crossbowman" 25 9} {GUARDIAN}
#endif

                                    #orc guards in room 3 (the one with no break-in point)
                                    {GENERIC_UNIT_WITH_ID  6 "Orcish Slayer" 25 5 trigger_room_3_comment_1} {GUARDIAN}
#ifdef HARD
#else
                                    {GENERIC_UNIT_WITH_ID  6 "Orcish Slurbow" 25 7 trigger_room_3_comment_2} {GUARDIAN}
#endif

                                    #orc guards in coridors
                                    {GENERIC_UNIT 6 "Orcish Warlord" 37 5} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Warlord" 38 5} {GUARDIAN}
#ifdef HARD
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Slurbow" 41 8 trigger_exit_comment_1} {GUARDIAN}
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Slurbow" 43 5 trigger_exit_comment_2} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Warlord" 31 2} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Slayer" 33 4} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Direwolf Rider" 28 6} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Slurbow" 31 7} {GUARDIAN}
#else
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Crossbowman" 41 8 trigger_exit_comment_1} {GUARDIAN}
                                    {GENERIC_UNIT_WITH_ID 6 "Orcish Crossbowman" 43 5 trigger_exit_comment_2} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Warrior" 31 2} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Assassin" 33 4} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Goblin Knight" 28 6} {GUARDIAN}
                                    {GENERIC_UNIT 6 "Orcish Crossbowman" 31 7} {GUARDIAN}
#endif

                                    #humans in room 1
                                    {GENERIC_UNIT_WITH_ID  7 "Prisoner_Spearman" 18 8 spokesman_1}
                                    {GENERIC_UNIT_WITH_ID  7 "Prisoner_Bowman" 17 10 sidekick_1}
                                    {GENERIC_UNIT 7 "Prisoner_Poacher" 17 12}
                                    {GENERIC_UNIT 7 "Prisoner_Fencer" 20 14}

                                    #humans in room 2
                                    {GENERIC_UNIT_WITH_ID  7 "Prisoner_Spearman" 29 13 spokesman_2}
                                    {GENERIC_UNIT_WITH_ID  7 "Prisoner_Bowman" 37 14 sidekick_2}
                                    {GENERIC_UNIT 7 "Prisoner_Footpad" 34 14}
                                    {GENERIC_UNIT 7 "Prisoner_Thief" 39 11}

                                    #humans in room 3 (the one with no entrance and hence no sidekick)
                                    {GENERIC_UNIT 7 "Prisoner_Footpad" 25 3}
                                    {GENERIC_UNIT 7 "Prisoner_Thief" 29 4}
                                    {GENERIC_UNIT 7 "Prisoner_Poacher" 23 6}
                                    {GENERIC_UNIT 7 "Prisoner_Fencer" 22 4}

                                    #rename the appropriae units
                                    [modify_unit]
                                        [filter]
                                            id="spokesman_"+$first_wall # wmllint: ignore
                                        [/filter]
                                        id=spokesman
                                    [/modify_unit]
                                    [modify_unit]
                                        [filter]
                                            id="sidekick_"+$first_wall # wmllint: ignore
                                        [/filter]
                                        id=sidekick
                                    [/modify_unit]
                                    # wmllint: recognize orc_slaver
                                    [modify_unit]
                                        [filter]
                                            id="orc_slaver_"+$first_wall # wmllint: ignore
                                        [/filter]
                                        id=orc_slaver
                                    [/modify_unit]

                                    #marks whether we have conversations with these guys
                                    {VARIABLE human_prisoners_alive 12}

                                    #have we decided to commit mass suicide yet?
                                    {VARIABLE human_prisoners_helpful yes}

                                    #to remove shroud near prisoners. Elvish_Hunter
                                    [redraw]
                                        side=7
                                    [/redraw]

                                    [message]
                                        speaker=Elyssa
                                        message= _ "Is there anything in there?"
                                    [/message]

                                    {MESSAGE_FIRST_UNIT
                                    ( _ "Mine. Humans work for Orcs.")
                                    ( "" )
                                    ( "" )
                                    ( _ "Yes, we appear to have broken into a mine. I see humans and they are working for some orcs.")}

                                    [if]
                                        [variable]
                                            name=unit.id
                                            equals=Grog
                                        [/variable]
                                        [or]
                                            [variable]
                                                name=unit.id
                                                equals=mudcrawler
                                            [/variable]
                                        [/or]

                                        [then]
                                            [message]
                                                speaker=Zurg
                                                message= _ "Speak to them."
                                            [/message]
                                        [/then]

                                        [else]
                                            [message]
                                                speaker=Grog
                                                message= _ "Speak to them."
                                            [/message]
                                        [/else]
                                    [/if]

                                    [if]
                                        [variable]
                                            name=unit.id
                                            equals=mudcrawler
                                        [/variable]
                                        [then]
                                            [message]
                                                speaker=Grog
                                                # wmllint: local spelling Uhh
                                                message= _ "Uhh... Hello."
                                            [/message]
                                        [/then]
                                        [else]
                                            [message]
                                                speaker=unit
                                                message= _ "Uhh... Hello."
                                            [/message]
                                        [/else]
                                    [/if]

                                    [message]
                                        speaker=sidekick
                                        message= _ "Help! A talking wall!"
                                    [/message]

                                    [store_unit]
                                        variable=sidekick_unit
                                        kill=no
                                        [filter]
                                            id=sidekick
                                        [/filter]
                                    [/store_unit]

                                    [message]
                                        speaker=spokesman
                                        message= _ "Shhh, not so loud $sidekick_unit.name . They are Trolls."
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "What do you want?"
                                    [/message]

                                    {CLEAR_VARIABLE "sidekick_unit"}

                                    [message]
                                        speaker=Grog
                                        message= _ "Trolls look for new home."
                                    [/message]

                                    [message]
                                        speaker=sidekick
                                        message= _ "My Grandmam used to tell me about Trolls..."
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "Yes, yes, we know all about your Grandmam."
                                    [/message]

                                    [message]
                                        speaker=Grog
                                        message= _ "What you do Human?"
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "We are mining for the Orcs."
                                    [/message]

                                    [message]
                                        speaker=Grog
                                        message= _ "Why work for Orcs?"
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "We are prisoners."
                                    [/message]

                                    [message]
                                        speaker=orc_slaver
                                        message= _ "Get to work you filthy swine!"
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "He hasn't seen you yet. How did you get here?"
                                    [/message]

                                    [message]
                                        speaker=orc_slaver
                                        message= _ "You! Maggot! Who are you talking to?"
                                    [/message]

                                    [message]
                                        speaker=orc_slaver
                                        message= _ "Trolls! Trolls in the tunnel!"
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "Looks like you're fighting your way out. If you rid us of these Orcs then we can assist you."
                                    [/message]

                                    [message]
                                        speaker=Elyssa
                                        message= _ "Will you join us in the fight?"
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "Our people have only heard of Trolls in stories and legend and they lead us to be distrustful of your kind."
                                    [/message]

                                    [message]
                                        speaker=Elyssa
                                        message= _ "I'm a Human, I can vouch for the honor of these Trolls."
                                    [/message]

                                    [message]
                                        speaker=spokesman
                                        message= _ "True, but we can't guarantee your true intentions. Ridding us of these Orcs will go a long way to demonstrating your trustworthiness."
                                    [/message]

                                    [objectives]
                                        side=1
                                        [objective]
                                            description= _ "Kill all of the orcs"
                                            condition=win
                                        [/objective]
                                        [objective]
                                            description= _ "Death of Grog"
                                            condition=lose
                                        [/objective]
                                        [objective]
                                            description= _ "Death of Zurg"
                                            condition=lose
                                        [/objective]
                                        [objective]
                                            description= _ "Death of Elyssa"
                                            condition=lose
                                        [/objective]
                                        [objective]
                                            description= _ "Time runs out"
                                            condition=lose
                                        [/objective]
                                        [gold_carryover]
                                            bonus=yes
                                            carryover_percentage=40
                                        [/gold_carryover]
                                    [/objectives]
                                [/then]

                                [else]
                                    {MESSAGE_FIRST_UNIT
                                    ( _ "We broke wall here to.")
                                    ( "" )
                                    ( "" )
                                    ( _ "We've got through here as well.")}
                                [/else]
                            [/if]
                        [/command]
                    [/option]
                    [option]
                        message= _ "No, definitely not!"
                        [command]
                        [/command]
                    [/option]
                [/message]
            [/then]
        [/if]
    [/event]
#enddef

    #
    # Lets define these macros then
    #
    {WALL_DOWN 1
    "15,15,15,16,17"
    "11,12,13,13,14"
    "18,17,16,16,16"
    "13,13,12,11,10"}
    {WALL_DOWN 2
    "29,30,31,32,33"
    "15,15,16,16,16"
    "33,32,31,30,29"
    "15,15,15,14,14"}

    #
    # Sighted Inmates of Room 3: talk
    #
    [event]
        name=sighted

        [filter]
            id=trigger_room_3_comment_1
            [or]
                id=trigger_room_3_comment_2
            [/or]
        [/filter]

        {MESSAGE_SECOND_UNIT
        ( _ "Orcs this way!")
        ( "" )
        ( "" )
        ( _ "Quick, there are more orcs in here.")}
    [/event]

    #
    # Sighted Orcs by the exit: talk
    #
    [event]
        name=sighted

        [filter]
            id=trigger_exit_comment_1
            [or]
                id=trigger_exit_comment_2
            [/or]
        [/filter]

        {MESSAGE_SECOND_UNIT
        ( _ "Orcs this way!")
        ( "" )
        ( "" )
        ( _ "Quick, there are more orcs in here.")}
    [/event]

    #
    # Death of all orcs: you win
    #
    [event]
        name=die

        [filter_condition]
            [not]
                [have_unit]
                    race=orc
                [/have_unit]
            [/not]
            [not]
                [have_unit]
                    race=goblin
                [/have_unit]
            [/not]
            [not]
                [have_unit]
                    race=wolf
                [/have_unit]
            [/not]
            [not]
                [variable]
                    name=first_wall
                    equals="no_wall_opened"
                [/variable]
            [/not]
        [/filter_condition]

        [endlevel]
            result=victory
            bonus=yes
            {NEW_GOLD_CARRYOVER 40}
        [/endlevel]
    [/event]

    #
    # Time out: talk and defeat
    #
    [event]
        name=time over
        [message]
            speaker=Elyssa
            message= _ "We have run out of supplies."
        [/message]
    [/event]

    #
    # Victory: talk, move humans to your side, and clear up variables
    #
    [event]
        name=victory

        [message]
            speaker=Grog
            message= _ "All Orcs dead. Humans help Trolls?"
        [/message]

        #we don't have to check that he is alive because we deal with that in tsog-deaths.cfg
        #and if you managed to kill all of the humans you are bad enought to get a useless converasation

        [message]
            speaker=spokesman
            message= _ "Thank you! We are incredibly grateful for your assistance. We will of course help you in your quest for a new home. Just let us take our weapons."
        [/message]
        #in 1.8.3, TRANSFORM_UNIT corrupts replays. Used ADVANCE_UNIT. E_H.
        {ADVANCE_UNIT type="Prisoner_Spearman" "Spearman TSoG"}
        {ADVANCE_UNIT type="Prisoner_Bowman" "Bowman"}
        {ADVANCE_UNIT type="Prisoner_Poacher" "Poacher_Peasant"}
        {ADVANCE_UNIT type="Prisoner_Fencer" "Fencer"}
        {ADVANCE_UNIT type="Prisoner_Footpad" "Footpad_Peasant"}
        {ADVANCE_UNIT type="Prisoner_Thief" "Thief"}
        #Just to be sure...
        [redraw]
        [/redraw]

        [message]
            speaker=Elyssa
            message= _ "Do you mind explaining how you become slaves?"
        [/message]

        [store_unit]
            variable=spokesman_unit
            kill=no
            [filter]
                id=spokesman
            [/filter]
        [/store_unit]

        [store_unit]
            variable=sidekick_unit
            kill=no
            [filter]
                id=sidekick
            [/filter]
        [/store_unit]

        #this is a bit highflown for a plebian to say (Eros)
        [message]
            speaker=spokesman
            message= _ "Certainly."
        [/message]

        [message]
            speaker=sidekick
            message= _ "<span size='small' style='italic'>Don't say too much $spokesman_unit.name. We can't be sure of their true intentions.</span>"
        [/message]

        [message]
            speaker=spokesman
            #We can change the name of this mountain if you wish
            message= _ "<span size='small' style='italic'>Don't worry $sidekick_unit.name .</span>"
        [/message]

        [message]
            speaker=spokesman
            message= _ "We were a scouting party, sent by..."
        [/message]

        [message]
            speaker=sidekick
            message= _ "<span size='small' style='italic'>Careful.</span>"
        [/message]

        [message]
            speaker=spokesman
            message= _ "...the council but our leader was captured by foul undead creatures."
        [/message]

        [message]
            speaker=Elyssa
            message= _ "We may be able to rescue him as we have unfinished business with them as well."
        [/message]

        [message]
            speaker=spokesman
            message= _ "Then we shall assist you in that too."
        [/message]

        [message]
            speaker=Grog
            message= _ "Grog break Lich. Trolls be safe."
        [/message]

        [message]
            speaker=spokesman
            message= _ "You will have more than just the Lich to fight in these dark days."
        [/message]

        {CLEAR_VARIABLE "spokesman_unit"}
        {CLEAR_VARIABLE "sidekick_unit"}

        #change the humans to your side
        [modify_unit]
            [filter]
                side=7
            [/filter]
            side=1
        [/modify_unit]

        {CLEAR_VARIABLE "wall_opened_1"}
        {CLEAR_VARIABLE "wall_opened_2"}
        {CLEAR_VARIABLE "wall_checked_1"}
        {CLEAR_VARIABLE "wall_checked_2"}

        {CLEAR_VARIABLE "first_wall"}

        {CLEAR_VARIABLE "unit_who_opened_wall"}
    [/event]

    {~add-ons/The_Sojournings_of_Grog/utils/tsog-deaths.cfg}
[/scenario]
